
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <script src="./node_modules/jscoq/dist/frontend/index.js" type="module"></script>
<script src="./jscoq-agent.js" type="module"></script>
<link href="./node_modules/jscoq/dist/frontend/index.css" rel="stylesheet" type="text/css" />
<link href="./node_modules/jscoq/frontend/classic/css/jscoqdoc.css" rel="stylesheet" type="text/css" />
  <title>Tutorial_Equations_basics.v</title>
</head>
<body>
<div id="page">
<div id="header"></div>
<div id="main" class="jscoqdoc">
<div class="code">

<br/>
</div>

<div class="doc">
<a id="lab1"></a><h1 class="section">Tutorial Equations : Basic Definitions and Reasoning with Equations</h1>


<div class="paragraph"> </div>

<a id="lab2"></a><h3 class="section">Summary</h3>

  <span class="inlinecode"><span class="id" title="keyword">Equations</span></span> is a plugin for Coq that offers a powerful support
  for writing functions by dependent pattern matching, possibly using
  well-founded recursion and obligations.
  To help reason on programs, <span class="inlinecode"><span class="id" title="keyword">Equations</span></span> also comes with its own set of
  tactics, and can automatically derive properties like no-confusion
  properties or subterm relations.

<div class="paragraph"> </div>

  In this tutorial, we introduce the basic features of <span class="inlinecode"><span class="id" title="keyword">Equations</span></span>, step by
  step through practical examples.

<div class="paragraph"> </div>

  In section 1, we explain how to define basic functions by dependent
  pattern matching using <span class="inlinecode"><span class="id" title="keyword">Equations</span></span>, and how <span class="inlinecode"><span class="id" title="keyword">Equations</span></span> helps to reason about
  such functions.
  We then discuss <span class="inlinecode"><span class="id" title="keyword">with</span></span> clauses and <span class="inlinecode"><span class="id" title="keyword">where</span></span> clauses in section 2 and 3, two
  features that provide flexibility when writing functions by dependent
  pattern matching.

<div class="paragraph"> </div>

<a id="lab3"></a><h3 class="section">Table of content</h3>


<div class="paragraph"> </div>

<ul class="doclist">
<li> 1. Basic definitions and reasoning
<ul class="doclist">
<li> 1.1 Defining functions by dependent pattern matching

</li>
<li> 1.2 Reasoning with <span class="inlinecode"><span class="id" title="keyword">Equations</span></span>

</li>
</ul>

</li>
<li> 2. With clauses

</li>
<li> 3. Where clauses

</li>
</ul>

<div class="paragraph"> </div>

<a id="lab4"></a><h3 class="section">Prerequisites</h3>


<div class="paragraph"> </div>

  Needed:
<ul class="doclist">
<li> We assume known basic knowledge of Coq, of and defining functions by recursion

</li>
</ul>

<div class="paragraph"> </div>

  Installation:
<ul class="doclist">
<li> Equations is available by default in the Coq Platform

</li>
<li> Otherwise, it is available via opam under the name coq-equations

</li>
</ul>

<div class="paragraph"> </div>


<div class="paragraph"> </div>

<a id="lab5"></a><h1 class="section">1. Basic definitions and reasoning</h1>


<div class="paragraph"> </div>

  Let's start by importing the package:

</div>
<div class="code">

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="keyword">Equations</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Equations</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab6"></a><h2 class="section">1.1 Defining functions by dependent pattern matching</h2>


<div class="paragraph"> </div>

    In its simplest form, <span class="inlinecode"><span class="id" title="keyword">Equations</span></span> provides a practical interface to
    define functions on inductive types by pattern matching and recursion
    rather than using Fixpoint and match.
    As first examples, let's define basic functions on lists.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a id="list" class="idref" href="#list"><span class="id" title="definition, inductive"><span id="list_rect" class="id"><span id="list_ind" class="id"><span id="list_rec" class="id"><span id="list_sind" class="id">list</span></span></span></span></span></a> <a id="A:3" class="idref" href="#A:3"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;| <a id="nil" class="idref" href="#nil"><span class="id" title="constructor">nil</span></a>  : <a class="idref" href="Tutorial_Equations_basics.html#list:4"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:3"><span class="id" title="variable">A</span></a><br/>
&nbsp;&nbsp;| <a id="cons" class="idref" href="#cons"><span class="id" title="constructor">cons</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#A:3"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tutorial_Equations_basics.html#list:4"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:3"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tutorial_Equations_basics.html#list:4"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:3"><span class="id" title="variable">A</span></a>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="Tutorial_Equations_basics.html#nil"><span class="id" title="constructor">nil</span></a> {<span class="id" title="var">_</span>}.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="Tutorial_Equations_basics.html#cons"><span class="id" title="constructor">cons</span></a> {<span class="id" title="var">_</span>} <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>

<br/>
</div>

<div class="doc">
To write a function <span class="inlinecode"><span class="id" title="var">f</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">list</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">B</span></span> on lists or another a basic
      inductive type, it suffices to write:
<ul class="doclist">
<li> Equation at the beginning of you function rather than Fixpoint

</li>
<li> For each constructor <span class="inlinecode"><span class="id" title="var">cst</span></span> <span class="inlinecode"><span class="id" title="var">x1</span></span> <span class="inlinecode">...</span> <span class="inlinecode"><span class="id" title="var">xn</span></span> like <span class="inlinecode"><span class="id" title="var">cons</span></span> <span class="inlinecode"><span class="id" title="var">a</span></span> <span class="inlinecode"><span class="id" title="var">l</span></span>, specify how <span class="inlinecode"><span class="id" title="var">f</span></span>
      computes on it by writing <span class="inlinecode"><span class="id" title="var">f</span></span> <span class="inlinecode">(<span class="id" title="var">cst</span></span> <span class="inlinecode"><span class="id" title="var">x1</span></span> <span class="inlinecode">...</span> <span class="inlinecode"><span class="id" title="var">xn</span>)</span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">t</span></span> where <span class="inlinecode"><span class="id" title="var">t</span></span> may
      contain <span class="inlinecode"><span class="id" title="var">f</span></span> recursively.

</li>
<li> Separate the different cases by semi-colon "<span class="inlinecode">;</span>"

</li>
<li> As usual finish you definition by a dot "<span class="inlinecode">.</span>"

</li>
</ul>

<div class="paragraph"> </div>

  For instance, we can define the function <span class="inlinecode"><span class="id" title="var">tail</span></span>, <span class="inlinecode"><span class="id" title="var">length</span></span> and <span class="inlinecode"><span class="id" title="var">app</span></span> by:

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Equations</span> <a id="tail" class="idref" href="#tail"><span class="id" title="definition">tail</span></a> {<a id="A:6" class="idref" href="#A:6"><span class="id" title="binder">A</span></a>} (<a id="l:7" class="idref" href="#l:7"><span class="id" title="binder">l</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:6"><span class="id" title="variable">A</span></a>) : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="var">A</span> :=<br/>
<a class="idref" href="Tutorial_Equations_basics.html#tail:9"><span class="id" title="definition">tail</span></a> <a class="idref" href="Tutorial_Equations_basics.html#nil"><span class="id" title="constructor">nil</span></a> := <a class="idref" href="Tutorial_Equations_basics.html#nil"><span class="id" title="constructor">nil</span></a>;<br/>
<a class="idref" href="Tutorial_Equations_basics.html#tail:12"><span class="id" title="definition">tail</span></a> (<a class="idref" href="Tutorial_Equations_basics.html#cons"><span class="id" title="constructor">cons</span></a> <a class="idref" href="Tutorial_Equations_basics.html#a:10"><span class="id" title="variable">a</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l:11"><span class="id" title="variable">l</span></a>) := <span class="id" title="var">l</span>.<br/>

<br/>
<span class="id" title="keyword">Equations</span> <a id="length" class="idref" href="#length"><span class="id" title="definition">length</span></a> {<a id="A:13" class="idref" href="#A:13"><span class="id" title="binder">A</span></a>} (<a id="l:14" class="idref" href="#l:14"><span class="id" title="binder">l</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:13"><span class="id" title="variable">A</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
<a class="idref" href="Tutorial_Equations_basics.html#length:16"><span class="id" title="definition">length</span></a> <a class="idref" href="Tutorial_Equations_basics.html#nil"><span class="id" title="constructor">nil</span></a> := 0;<br/>
<a class="idref" href="Tutorial_Equations_basics.html#length:19"><span class="id" title="definition">length</span></a> (<a class="idref" href="Tutorial_Equations_basics.html#cons"><span class="id" title="constructor">cons</span></a> <a class="idref" href="Tutorial_Equations_basics.html#a:17"><span class="id" title="variable">a</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l:18"><span class="id" title="variable">l</span></a>) := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="Tutorial_Equations_basics.html#length:15"><span class="id" title="definition">length</span></a> <span class="id" title="var">l</span>).<br/>

<br/>
<span class="id" title="keyword">Equations</span> <a id="app" class="idref" href="#app"><span class="id" title="definition">app</span></a> {<a id="A:20" class="idref" href="#A:20"><span class="id" title="binder">A</span></a>} (<a id="l:21" class="idref" href="#l:21"><span class="id" title="binder">l</span></a> <a id="l':22" class="idref" href="#l':22"><span class="id" title="binder">l'</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:20"><span class="id" title="variable">A</span></a>) : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="var">A</span> :=<br/>
<a class="idref" href="Tutorial_Equations_basics.html#app:25"><span class="id" title="definition">app</span></a> <a class="idref" href="Tutorial_Equations_basics.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l':24"><span class="id" title="variable">l'</span></a> := <span class="id" title="var">l'</span>;<br/>
<a class="idref" href="Tutorial_Equations_basics.html#app:29"><span class="id" title="definition">app</span></a> (<a class="idref" href="Tutorial_Equations_basics.html#cons"><span class="id" title="constructor">cons</span></a> <a class="idref" href="Tutorial_Equations_basics.html#a:26"><span class="id" title="variable">a</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l:27"><span class="id" title="variable">l</span></a>) <a class="idref" href="Tutorial_Equations_basics.html#l':28"><span class="id" title="variable">l'</span></a> :=  <a class="idref" href="Tutorial_Equations_basics.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">a</span> (<a class="idref" href="Tutorial_Equations_basics.html#app:23"><span class="id" title="definition">app</span></a> <span class="id" title="var">l</span> <span class="id" title="var">l'</span>).<br/>

<br/>
<span class="id" title="keyword">Infix</span> <a id="f03f7a04ef75ff3ac66ca5c23554e52e" class="idref" href="#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">&quot;</span></a>++" := <a class="idref" href="Tutorial_Equations_basics.html#app"><span class="id" title="definition">app</span></a> (<span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>, <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 60).<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="keyword">Equations</span></span> is compatible with usual facilities provided by Coq to write
    terms:
<ul class="doclist">
<li> It is compatible with implicit arguments that as usual do not need to
      be written provided it can be inferred, for instance, above, we wrote
      <span class="inlinecode"><span class="id" title="var">app</span></span> <span class="inlinecode"><span class="id" title="var">nil</span></span> <span class="inlinecode"><span class="id" title="var">l'</span></span> rather than <span class="inlinecode"><span class="id" title="var">app</span></span> <span class="inlinecode">(<span class="id" title="var">nil</span></span> <span class="inlinecode"><span class="id" title="var">A</span>)</span> <span class="inlinecode"><span class="id" title="var">l'</span></span> as <span class="inlinecode"><span class="id" title="var">A</span></span> was declared as an
      implicit argument of <span class="inlinecode"><span class="id" title="var">nil</span></span>.

</li>
<li> We can use the underscores "_" for terms that we do not use, terms
      that Coq can infer on its own, but also to describe what to do in all
      remaining cases of our pattern matching.
      As <span class="inlinecode"><span class="id" title="var">list</span></span> only has two constructors to it is not very useful here,
      but we can still see it works by defining a constant function:

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Equations</span> <a id="cst_b" class="idref" href="#cst_b"><span class="id" title="definition">cst_b</span></a> {<a id="A:30" class="idref" href="#A:30"><span class="id" title="binder">A</span></a> <a id="B:31" class="idref" href="#B:31"><span class="id" title="binder">B</span></a>} (<a id="b:32" class="idref" href="#b:32"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#B:31"><span class="id" title="variable">B</span></a>) (<a id="l:33" class="idref" href="#l:33"><span class="id" title="binder">l</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:30"><span class="id" title="variable">A</span></a>) : <span class="id" title="var">B</span> :=<br/>
<a class="idref" href="Tutorial_Equations_basics.html#cst_b:36"><span class="id" title="definition">cst_b</span></a> <a class="idref" href="Tutorial_Equations_basics.html#b:35"><span class="id" title="variable">b</span></a> (<span class="id" title="var">_</span>) := <span class="id" title="var">b</span>.<br/>

<br/>
</div>

<div class="doc">
<ul class="doclist">
<li> We can use notations both in the pattern matching (on the left-hand
      side of :=) or in the bodies of the function (on the right-hand side
      of :=). This provides an easy and very visual way to define functions.
      For instance, with the usual notations for lists, we can redefine
      <span class="inlinecode"><span class="id" title="var">length</span></span> and <span class="inlinecode"><span class="id" title="var">app</span></span> as:

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Notation</span> <a id="c8619a1e4f7ee366531acb9abd41b255" class="idref" href="#c8619a1e4f7ee366531acb9abd41b255"><span class="id" title="notation">&quot;</span></a>[]" := <a class="idref" href="Tutorial_Equations_basics.html#nil"><span class="id" title="constructor">nil</span></a>.<br/>
<span class="id" title="keyword">Notation</span> <a id="1e2518ff2e78f907c94429897ac7861a" class="idref" href="#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">&quot;</span></a>[ x ]" := (<a class="idref" href="Tutorial_Equations_basics.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">x</span> <a class="idref" href="Tutorial_Equations_basics.html#nil"><span class="id" title="constructor">nil</span></a>).<br/>
<span class="id" title="keyword">Notation</span> <a id=":::x_'::'_x" class="idref" href="#:::x_'::'_x"><span class="id" title="notation">&quot;</span></a>x :: l" := (<a class="idref" href="Tutorial_Equations_basics.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">x</span> <span class="id" title="var">l</span>).<br/>

<br/>
<span class="id" title="keyword">Equations</span> <a id="length'" class="idref" href="#length'"><span class="id" title="definition">length'</span></a> {<a id="A:37" class="idref" href="#A:37"><span class="id" title="binder">A</span></a>} (<a id="l:38" class="idref" href="#l:38"><span class="id" title="binder">l</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:37"><span class="id" title="variable">A</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
<a class="idref" href="Tutorial_Equations_basics.html#length':40"><span class="id" title="definition">length'</span></a> <a class="idref" href="Tutorial_Equations_basics.html#c8619a1e4f7ee366531acb9abd41b255"><span class="id" title="notation">[]</span></a>     := 0;<br/>
<a class="idref" href="Tutorial_Equations_basics.html#length':43"><span class="id" title="definition">length'</span></a> (<a class="idref" href="Tutorial_Equations_basics.html#a:41"><span class="id" title="variable">a</span></a><a class="idref" href="Tutorial_Equations_basics.html#:::x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="Tutorial_Equations_basics.html#l:42"><span class="id" title="variable">l</span></a>) := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="Tutorial_Equations_basics.html#length':39"><span class="id" title="definition">length'</span></a> <span class="id" title="var">l</span>).<br/>

<br/>
<span class="id" title="keyword">Equations</span> <a id="app'" class="idref" href="#app'"><span class="id" title="definition">app'</span></a> {<a id="A:44" class="idref" href="#A:44"><span class="id" title="binder">A</span></a>} (<a id="l:45" class="idref" href="#l:45"><span class="id" title="binder">l</span></a> <a id="l':46" class="idref" href="#l':46"><span class="id" title="binder">l'</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:44"><span class="id" title="variable">A</span></a>) : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="var">A</span> :=<br/>
<a class="idref" href="Tutorial_Equations_basics.html#app':49"><span class="id" title="definition">app'</span></a> <a class="idref" href="Tutorial_Equations_basics.html#c8619a1e4f7ee366531acb9abd41b255"><span class="id" title="notation">[]</span></a>     <a class="idref" href="Tutorial_Equations_basics.html#l':48"><span class="id" title="variable">l'</span></a> := <span class="id" title="var">l'</span>;<br/>
<a class="idref" href="Tutorial_Equations_basics.html#app':53"><span class="id" title="definition">app'</span></a> (<a class="idref" href="Tutorial_Equations_basics.html#a:50"><span class="id" title="variable">a</span></a><a class="idref" href="Tutorial_Equations_basics.html#:::x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="Tutorial_Equations_basics.html#l:51"><span class="id" title="variable">l</span></a>) <a class="idref" href="Tutorial_Equations_basics.html#l':52"><span class="id" title="variable">l'</span></a> := <span class="id" title="var">a</span> <a class="idref" href="Tutorial_Equations_basics.html#:::x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="Tutorial_Equations_basics.html#:::x_'::'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Tutorial_Equations_basics.html#app':47"><span class="id" title="definition">app'</span></a> <span class="id" title="var">l</span> <span class="id" title="var">l'</span><a class="idref" href="Tutorial_Equations_basics.html#:::x_'::'_x"><span class="id" title="notation">)</span></a>.<br/>

<br/>
</div>

<div class="doc">
For the users that would prefer it, there is also an alternative syntax
    closer to the <span class="inlinecode"><span class="id" title="keyword">Fixpoint</span></span> one.
    With this syntax, we have to start each clause with "<span class="inlinecode">|</span>" and separate the
    different patterns in a clause by "<span class="inlinecode">,</span>", but we no longer have to repeat
    the name of the functions nor to put parenthesis or finish a line by "<span class="inlinecode">;</span>".

<div class="paragraph"> </div>

    With this syntax, we can rewrite <span class="inlinecode"><span class="id" title="var">length</span></span> and <span class="inlinecode"><span class="id" title="var">app</span></span> as:
  
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Equations</span> <a id="length''" class="idref" href="#length''"><span class="id" title="definition">length''</span></a> {<a id="A:54" class="idref" href="#A:54"><span class="id" title="binder">A</span></a>} (<a id="l:55" class="idref" href="#l:55"><span class="id" title="binder">l</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:54"><span class="id" title="variable">A</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;| <a class="idref" href="Tutorial_Equations_basics.html#c8619a1e4f7ee366531acb9abd41b255"><span class="id" title="notation">[]</span></a>     := 0<br/>
&nbsp;&nbsp;| (<a class="idref" href="Tutorial_Equations_basics.html#a:57"><span class="id" title="variable">a</span></a><a class="idref" href="Tutorial_Equations_basics.html#:::x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="Tutorial_Equations_basics.html#l:58"><span class="id" title="variable">l</span></a>) := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="Tutorial_Equations_basics.html#length'':56"><span class="id" title="definition">length''</span></a> <span class="id" title="var">l</span>).<br/>

<br/>
<span class="id" title="keyword">Equations</span> <a id="app''" class="idref" href="#app''"><span class="id" title="definition">app''</span></a> {<a id="A:59" class="idref" href="#A:59"><span class="id" title="binder">A</span></a>} (<a id="l:60" class="idref" href="#l:60"><span class="id" title="binder">l</span></a> <a id="l':61" class="idref" href="#l':61"><span class="id" title="binder">l'</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:59"><span class="id" title="variable">A</span></a>) : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="var">A</span> :=<br/>
&nbsp;&nbsp;| <a class="idref" href="Tutorial_Equations_basics.html#c8619a1e4f7ee366531acb9abd41b255"><span class="id" title="notation">[]</span></a>    , <a class="idref" href="Tutorial_Equations_basics.html#l':64"><span class="id" title="variable">l'</span></a> := <span class="id" title="var">l'</span><br/>
&nbsp;&nbsp;| (<a class="idref" href="Tutorial_Equations_basics.html#a:65"><span class="id" title="variable">a</span></a><a class="idref" href="Tutorial_Equations_basics.html#:::x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="Tutorial_Equations_basics.html#l:66"><span class="id" title="variable">l</span></a>), <a class="idref" href="Tutorial_Equations_basics.html#l':70"><span class="id" title="variable">l'</span></a> := <span class="id" title="var">a</span> <a class="idref" href="Tutorial_Equations_basics.html#:::x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="Tutorial_Equations_basics.html#:::x_'::'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Tutorial_Equations_basics.html#app'':62"><span class="id" title="definition">app''</span></a> <span class="id" title="var">l</span> <span class="id" title="var">l'</span><a class="idref" href="Tutorial_Equations_basics.html#:::x_'::'_x"><span class="id" title="notation">)</span></a>.<br/>

<br/>
</div>

<div class="doc">
In this tutorial, we will keep to the first syntax but both are acceptable.

<div class="paragraph"> </div>

    <span class="inlinecode"><span class="id" title="keyword">Equations</span></span> enables us to pattern match on several different
    variables at the same time, for instance, to define a function <span class="inlinecode"><span class="id" title="var">nth_option</span></span>
    getting the nth-element of a list and returning <span class="inlinecode"><span class="id" title="var">None</span></span> otherwise.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Equations</span> <a id="nth_option" class="idref" href="#nth_option"><span class="id" title="definition">nth_option</span></a> {<a id="A:71" class="idref" href="#A:71"><span class="id" title="binder">A</span></a>} (<a id="n:72" class="idref" href="#n:72"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> ) (<a id="l:73" class="idref" href="#l:73"><span class="id" title="binder">l</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:71"><span class="id" title="variable">A</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="var">A</span> :=<br/>
<a class="idref" href="Tutorial_Equations_basics.html#nth_option:75"><span class="id" title="definition">nth_option</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#O"><span class="id" title="constructor">0</span></a> <a class="idref" href="Tutorial_Equations_basics.html#nil"><span class="id" title="constructor">nil</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ;<br/>
<a class="idref" href="Tutorial_Equations_basics.html#nth_option:78"><span class="id" title="definition">nth_option</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#O"><span class="id" title="constructor">0</span></a> (<a class="idref" href="Tutorial_Equations_basics.html#a:76"><span class="id" title="variable">a</span></a><a class="idref" href="Tutorial_Equations_basics.html#:::x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="Tutorial_Equations_basics.html#l:77"><span class="id" title="variable">l</span></a>) := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">a</span> ;<br/>
<a class="idref" href="Tutorial_Equations_basics.html#nth_option:80"><span class="id" title="definition">nth_option</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Tutorial_Equations_basics.html#n:79"><span class="id" title="variable">n</span></a>) <a class="idref" href="Tutorial_Equations_basics.html#nil"><span class="id" title="constructor">nil</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ;<br/>
<a class="idref" href="Tutorial_Equations_basics.html#nth_option:84"><span class="id" title="definition">nth_option</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Tutorial_Equations_basics.html#n:83"><span class="id" title="variable">n</span></a>) (<a class="idref" href="Tutorial_Equations_basics.html#a:81"><span class="id" title="variable">a</span></a><a class="idref" href="Tutorial_Equations_basics.html#:::x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="Tutorial_Equations_basics.html#l:82"><span class="id" title="variable">l</span></a>) := <a class="idref" href="Tutorial_Equations_basics.html#nth_option:74"><span class="id" title="definition">nth_option</span></a> <span class="id" title="var">n</span> <span class="id" title="var">l</span>.<br/>

<br/>
</div>

<div class="doc">
However, be careful that as for definitions using <span class="inlinecode"><span class="id" title="keyword">Fixpoint</span></span>, the order
    of matching matters : it produces term that are equal but with
    different computation rules.
    For instance, if we pattern match on <span class="inlinecode"><span class="id" title="var">l</span></span> first, we get a function
    <span class="inlinecode"><span class="id" title="var">nth_option'</span></span> that is equal to <span class="inlinecode"><span class="id" title="var">nth_option</span></span> but computes differently
    as it can been seen when proving <span class="inlinecode"><span class="id" title="var">eq_nth</span></span>.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Equations</span> <a id="nth_option'" class="idref" href="#nth_option'"><span class="id" title="definition">nth_option'</span></a> {<a id="A:85" class="idref" href="#A:85"><span class="id" title="binder">A</span></a>} (<a id="l:86" class="idref" href="#l:86"><span class="id" title="binder">l</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:85"><span class="id" title="variable">A</span></a>) (<a id="n:87" class="idref" href="#n:87"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="var">A</span> :=<br/>
<a class="idref" href="Tutorial_Equations_basics.html#nth_option':89"><span class="id" title="definition">nth_option'</span></a> <a class="idref" href="Tutorial_Equations_basics.html#c8619a1e4f7ee366531acb9abd41b255"><span class="id" title="notation">[]</span></a> <span class="id" title="var">_</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>;<br/>
<a class="idref" href="Tutorial_Equations_basics.html#nth_option':92"><span class="id" title="definition">nth_option'</span></a> (<a class="idref" href="Tutorial_Equations_basics.html#a:90"><span class="id" title="variable">a</span></a><a class="idref" href="Tutorial_Equations_basics.html#:::x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="Tutorial_Equations_basics.html#l:91"><span class="id" title="variable">l</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#O"><span class="id" title="constructor">0</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">a</span>;<br/>
<a class="idref" href="Tutorial_Equations_basics.html#nth_option':96"><span class="id" title="definition">nth_option'</span></a> (<a class="idref" href="Tutorial_Equations_basics.html#a:93"><span class="id" title="variable">a</span></a><a class="idref" href="Tutorial_Equations_basics.html#:::x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="Tutorial_Equations_basics.html#l:94"><span class="id" title="variable">l</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Tutorial_Equations_basics.html#n:95"><span class="id" title="variable">n</span></a>) := <a class="idref" href="Tutorial_Equations_basics.html#nth_option':88"><span class="id" title="definition">nth_option'</span></a> <span class="id" title="var">l</span> <span class="id" title="var">n</span>.<br/>

<br/>
<span class="id" title="keyword">Goal</span> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">∀</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">{</span></a><a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="binder, definition"><span id="A:97" class="id">A</span></span></a><a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">}</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">(</span></a><a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="binder, definition"><span id="a:98" class="id">a</span></span></a><a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">:</span></a><a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">A</span></a><a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">)</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="binder, definition"><span id="n:99" class="id">n</span></span></a><a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">,</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">nth_option</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">n</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">(</span></a><a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">nil</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">(</span></a><a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">A</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">:=</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">A</span></a><a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">))</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">=</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">nth_option'</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">(</span></a><a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">nil</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">(</span></a><a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">A</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">:=</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">A</span></a><a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">))</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">n</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">nth_option</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">nth_option'</span>.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
As exercices, you can try to define:
<ul class="doclist">
<li> A function <span class="inlinecode"><span class="id" title="var">map</span></span> <span class="inlinecode"><span class="id" title="var">f</span></span> <span class="inlinecode"><span class="id" title="var">l</span></span> that applies <span class="inlinecode"><span class="id" title="var">f</span></span> pointwise, on <span class="inlinecode"></span> <span class="inlinecode">[<span class="id" title="var">a</span>,</span> <span class="inlinecode">...</span> <span class="inlinecode">,<span class="id" title="var">a</span>]</span> <span class="inlinecode"></span> it
      returns <span class="inlinecode"></span> <span class="inlinecode">[<span class="id" title="var">f</span></span> <span class="inlinecode"><span class="id" title="var">a1</span>,</span> <span class="inlinecode">...</span> <span class="inlinecode">,</span> <span class="inlinecode"><span class="id" title="var">f</span></span> <span class="inlinecode"><span class="id" title="var">an</span>]</span> <span class="inlinecode"></span>

</li>
<li> A function <span class="inlinecode"><span class="id" title="var">head_option</span></span> that returns the head of a list and <span class="inlinecode"><span class="id" title="var">None</span></span> otherwise

</li>
<li> A function <span class="inlinecode"><span class="id" title="var">fold_right</span></span> <span class="inlinecode"><span class="id" title="var">f</span></span> <span class="inlinecode"><span class="id" title="var">b</span></span> <span class="inlinecode"><span class="id" title="var">l</span></span> that on a list <span class="inlinecode"></span> <span class="inlinecode">[<span class="id" title="var">a1</span>,</span> <span class="inlinecode">...,</span> <span class="inlinecode"><span class="id" title="var">an</span>]</span> <span class="inlinecode"></span>
      returns the element <span class="inlinecode"><span class="id" title="var">f</span></span> <span class="inlinecode"><span class="id" title="var">a1</span></span> <span class="inlinecode">(...</span> <span class="inlinecode">(<span class="id" title="var">f</span></span> <span class="inlinecode"><span class="id" title="var">an</span></span> <span class="inlinecode"><span class="id" title="var">b</span>))</span>

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Equations</span> <a id="map" class="idref" href="#map"><span class="id" title="definition">map</span></a> {<a id="A:100" class="idref" href="#A:100"><span class="id" title="binder">A</span></a> <a id="B:101" class="idref" href="#B:101"><span class="id" title="binder">B</span></a>} (<a id="f:102" class="idref" href="#f:102"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#A:100"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tutorial_Equations_basics.html#B:101"><span class="id" title="variable">B</span></a>) (<a id="l:103" class="idref" href="#l:103"><span class="id" title="binder">l</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:100"><span class="id" title="variable">A</span></a>) : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="var">B</span> :=<br/>
<a class="idref" href="Tutorial_Equations_basics.html#map:106"><span class="id" title="definition">map</span></a> <a class="idref" href="Tutorial_Equations_basics.html#f:105"><span class="id" title="variable">f</span></a> <a class="idref" href="Tutorial_Equations_basics.html#nil"><span class="id" title="constructor">nil</span></a> := <a class="idref" href="Tutorial_Equations_basics.html#nil"><span class="id" title="constructor">nil</span></a> ;<br/>
<a class="idref" href="Tutorial_Equations_basics.html#map:110"><span class="id" title="definition">map</span></a> <a class="idref" href="Tutorial_Equations_basics.html#f:108"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tutorial_Equations_basics.html#a:107"><span class="id" title="variable">a</span></a><a class="idref" href="Tutorial_Equations_basics.html#:::x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="Tutorial_Equations_basics.html#l:109"><span class="id" title="variable">l</span></a>) := <a class="idref" href="Tutorial_Equations_basics.html#:::x_'::'_x"><span class="id" title="notation">(</span></a><span class="id" title="var">f</span> <span class="id" title="var">a</span><a class="idref" href="Tutorial_Equations_basics.html#:::x_'::'_x"><span class="id" title="notation">)::(</span></a><a class="idref" href="Tutorial_Equations_basics.html#map:104"><span class="id" title="definition">map</span></a> <span class="id" title="var">f</span> <span class="id" title="var">l</span><a class="idref" href="Tutorial_Equations_basics.html#:::x_'::'_x"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Equations</span> <a id="head_option" class="idref" href="#head_option"><span class="id" title="definition">head_option</span></a> {<a id="A:111" class="idref" href="#A:111"><span class="id" title="binder">A</span></a>} (<a id="l:112" class="idref" href="#l:112"><span class="id" title="binder">l</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:111"><span class="id" title="variable">A</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="var">A</span> :=<br/>
<a class="idref" href="Tutorial_Equations_basics.html#head_option:114"><span class="id" title="definition">head_option</span></a> <span class="id" title="var">_</span> := <a class="idref" href="Tutorial_Equations_basics.html#to_fill"><span class="id" title="axiom">to_fill</span></a>.<br/>

<br/>
<span class="id" title="keyword">Equations</span> <a id="fold_right" class="idref" href="#fold_right"><span class="id" title="definition">fold_right</span></a> {<a id="A:115" class="idref" href="#A:115"><span class="id" title="binder">A</span></a> <a id="B:116" class="idref" href="#B:116"><span class="id" title="binder">B</span></a>} (<a id="f:117" class="idref" href="#f:117"><span class="id" title="binder">f</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#A:115"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tutorial_Equations_basics.html#B:116"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tutorial_Equations_basics.html#B:116"><span class="id" title="variable">B</span></a>) (<a id="b:118" class="idref" href="#b:118"><span class="id" title="binder">b</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#B:116"><span class="id" title="variable">B</span></a>) (<a id="l:119" class="idref" href="#l:119"><span class="id" title="binder">l</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:115"><span class="id" title="variable">A</span></a>) : <span class="id" title="var">B</span> :=<br/>
<a class="idref" href="Tutorial_Equations_basics.html#fold_right:123"><span class="id" title="definition">fold_right</span></a> <a class="idref" href="Tutorial_Equations_basics.html#f:122"><span class="id" title="variable">f</span></a> <a class="idref" href="Tutorial_Equations_basics.html#b:121"><span class="id" title="variable">b</span></a> <span class="id" title="var">_</span> := <a class="idref" href="Tutorial_Equations_basics.html#to_fill"><span class="id" title="axiom">to_fill</span></a>.<br/>

<br/>

<br/>
</div>

<div class="doc">
<a id="lab7"></a><h2 class="section">1.2 Reasoning with Equations</h2>

<div class="paragraph"> </div>

 Now that we have seen how to define basic functions, we need to
    understand how to reason about them.

<div class="paragraph"> </div>

    By default, the functions defined using <span class="inlinecode"><span class="id" title="keyword">Equations</span></span> are opaque and can not
    be unfolded with <span class="inlinecode"><span class="id" title="tactic">unfold</span></span> nor simplified with <span class="inlinecode"><span class="id" title="tactic">simpl</span></span> or <span class="inlinecode"><span class="id" title="var">cbn</span></span> as one
    would do with a <span class="inlinecode"><span class="id" title="keyword">Fixpoint</span></span> definition.
    This is on purpose to prevent uncontrolled unfolding which can easily
    happen, particularly when doing well-founded recursion or reasoning
    about proof carrying functions.
    Yet, note that it does not prevent us to use reflexivity when both sides
    of an equation are definitionally equal.

<div class="paragraph"> </div>

    For instance, consider <span class="inlinecode"><span class="id" title="var">nil_app</span></span> the usual computation rule for <span class="inlinecode"><span class="id" title="var">app</span></span>.
    It can not be unfolded, nor simplified by <span class="inlinecode"><span class="id" title="var">cbn</span></span> but can be proven by
    <span class="inlinecode"><span class="id" title="tactic">reflexivity</span></span>.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="nil_app" class="idref" href="#nil_app"><span class="id" title="lemma">nil_app</span></a> {<a id="A:124" class="idref" href="#A:124"><span class="id" title="binder">A</span></a>} (<a id="l:125" class="idref" href="#l:125"><span class="id" title="binder">l</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:124"><span class="id" title="variable">A</span></a>) : <a class="idref" href="Tutorial_Equations_basics.html#c8619a1e4f7ee366531acb9abd41b255"><span class="id" title="notation">[]</span></a> <a class="idref" href="Tutorial_Equations_basics.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l:125"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l:125"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Fail</span> <span class="id" title="tactic">unfold</span> "++". <span class="id" title="var">Fail</span> <span class="id" title="tactic">progress</span> <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If one wishes to recover unfolding, it is possible on a case by case
    basis using the option <span class="inlinecode"><span class="id" title="keyword">Global</span></span> <span class="inlinecode"><span class="id" title="keyword">Transparent</span></span> <span class="inlinecode"><span class="id" title="var">f</span></span> as shown below.
    It is also possible to set this option globally with <span class="inlinecode"><span class="id" title="keyword">Set</span></span> <span class="inlinecode"><span class="id" title="keyword">Equations</span></span>
    <span class="inlinecode"><span class="id" title="keyword">Transparent</span></span>, but it is not recommended to casual users.
    To recover simplification by <span class="inlinecode"><span class="id" title="tactic">simpl</span></span> and <span class="inlinecode"><span class="id" title="var">cbn</span></span>, one needs to additionally
    use the command <span class="inlinecode"><span class="id" title="var">Arguments</span></span> <span class="inlinecode"><span class="id" title="var">name_function</span></span> <span class="inlinecode">/</span>.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Equations</span> <a id="f4" class="idref" href="#f4"><span class="id" title="definition">f4</span></a> (<a id="n:126" class="idref" href="#n:126"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
<a class="idref" href="Tutorial_Equations_basics.html#f4:128"><span class="id" title="definition">f4</span></a> (<span class="id" title="var">_</span>) := 4.<br/>

<br/>
<span class="id" title="keyword">Global Transparent</span> <a class="idref" href="Tutorial_Equations_basics.html#f4"><span class="id" title="definition">f4</span></a>.<br/>

<br/>
<span class="id" title="keyword">Goal</span> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">f4</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">3</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">=</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">4</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tutorial_Equations_basics.html#f4"><span class="id" title="definition">f4</span></a>. <span class="id" title="var">Restart</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Fail</span> <span class="id" title="tactic">progress</span> <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Arguments</span> <a class="idref" href="Tutorial_Equations_basics.html#f4"><span class="id" title="definition">f4</span></a> /. <span class="id" title="var">cbn</span>.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
Rather than using <span class="inlinecode"><span class="id" title="var">cbn</span></span> or <span class="inlinecode"><span class="id" title="tactic">simpl</span></span>, for each function <span class="inlinecode"><span class="id" title="var">f</span></span>, <span class="inlinecode"><span class="id" title="keyword">Equations</span></span>
    internally declares an equality for each case of the pattern matching
    defining <span class="inlinecode"><span class="id" title="var">f</span></span>, in a database named <span class="inlinecode"><span class="id" title="var">f</span></span>.
    For instance, for <span class="inlinecode"><span class="id" title="var">app</span></span>, it declares <span class="inlinecode"><span class="id" title="var">app</span></span> <span class="inlinecode">[]</span> <span class="inlinecode"><span class="id" title="var">l'</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">l'</span></span> and
    <span class="inlinecode"><span class="id" title="var">app</span></span> <span class="inlinecode">(<span class="id" title="var">a</span>::<span class="id" title="var">l</span>)</span> <span class="inlinecode"><span class="id" title="var">l'</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">a</span></span> <span class="inlinecode">::</span> <span class="inlinecode">(<span class="id" title="var">app</span></span> <span class="inlinecode"><span class="id" title="var">l</span></span> <span class="inlinecode"><span class="id" title="var">l'</span>)</span>.
    It is then possible to simply simplify by the equations associated
    to function <span class="inlinecode"><span class="id" title="var">f1</span></span> <span class="inlinecode">...</span> <span class="inlinecode"><span class="id" title="var">fn</span></span> using the tactic <span class="inlinecode"><span class="id" title="tactic">autorewrite</span></span> <span class="inlinecode"><span class="id" title="keyword">with</span></span> <span class="inlinecode"><span class="id" title="var">f1</span></span> <span class="inlinecode">...</span> <span class="inlinecode"><span class="id" title="var">fn</span></span>.
    This provide a better control of unfolding when doing in proofs as
    compared to cbn the user can choose which functions <span class="inlinecode"><span class="id" title="var">f1</span></span> <span class="inlinecode">...</span> <span class="inlinecode"><span class="id" title="var">fn</span></span>,
    they wants to simplify.

<div class="paragraph"> </div>

    As an example, let's prove <span class="inlinecode"><span class="id" title="var">app_nil</span></span> <span class="inlinecode"><span class="id" title="var">l</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">l</span></span> <span class="inlinecode">++</span> <span class="inlinecode">[]</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">l</span></span>.
    As <span class="inlinecode"><span class="id" title="var">app</span></span> is defined by pattern match on <span class="inlinecode"><span class="id" title="var">l</span></span>, we prove the result by
    induction on <span class="inlinecode"><span class="id" title="var">l</span></span>,  and uses <span class="inlinecode"><span class="id" title="tactic">autorewrite</span></span> <span class="inlinecode"><span class="id" title="keyword">with</span></span> <span class="inlinecode"><span class="id" title="var">app</span></span> to simplify the goals.
    We can similarly prove that <span class="inlinecode"><span class="id" title="var">app</span></span> is associative.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="app_nil" class="idref" href="#app_nil"><span class="id" title="lemma">app_nil</span></a> {<a id="A:129" class="idref" href="#A:129"><span class="id" title="binder">A</span></a>} (<a id="l:130" class="idref" href="#l:130"><span class="id" title="binder">l</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:129"><span class="id" title="variable">A</span></a>) : <a class="idref" href="Tutorial_Equations_basics.html#l:130"><span class="id" title="variable">l</span></a> <a class="idref" href="Tutorial_Equations_basics.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="Tutorial_Equations_basics.html#c8619a1e4f7ee366531acb9abd41b255"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l:130"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>. <span class="id" title="var">all</span>: <span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">app</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
In the example above of <span class="inlinecode"><span class="id" title="var">app_nil</span></span>, we mimicked the pattern used in the
    definition of <span class="inlinecode"><span class="id" title="var">app</span></span> by <span class="inlinecode"><span class="id" title="tactic">induction</span></span> <span class="inlinecode"><span class="id" title="var">l</span></span>.
    While it works on simple examples, it quickly gets more complicated.
    For instance, consider the barely more elaborate example proving
    that both definition of <span class="inlinecode"><span class="id" title="var">nth_option</span></span> are equal.
    We have to be careful to first revert <span class="inlinecode"><span class="id" title="var">n</span></span> in order to generalise the
    induction hypothesis and get something strong enough when inducting on <span class="inlinecode"><span class="id" title="var">l</span></span>,
    and we then need to detruct n.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="nth_eq" class="idref" href="#nth_eq"><span class="id" title="lemma">nth_eq</span></a> {<a id="A:131" class="idref" href="#A:131"><span class="id" title="binder">A</span></a>} (<a id="l:132" class="idref" href="#l:132"><span class="id" title="binder">l</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:131"><span class="id" title="variable">A</span></a>) (<a id="n:133" class="idref" href="#n:133"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="Tutorial_Equations_basics.html#nth_option"><span class="id" title="definition">nth_option</span></a> <a class="idref" href="Tutorial_Equations_basics.html#n:133"><span class="id" title="variable">n</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l:132"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tutorial_Equations_basics.html#nth_option'"><span class="id" title="definition">nth_option'</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l:132"><span class="id" title="variable">l</span></a> <a class="idref" href="Tutorial_Equations_basics.html#n:133"><span class="id" title="variable">n</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span> : <span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">nth_option</span> <span class="id" title="var">nth_option'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">IHl</span>.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
This process quickly gets tedious and complicated to do by hand on real life examples,
    especially when using complicated inductive types, or more advanced
    notions of matching like <span class="inlinecode"><span class="id" title="keyword">with</span></span> and <span class="inlinecode"><span class="id" title="keyword">where</span></span> clauses (c.f 1.2).
    Consequently, <span class="inlinecode"><span class="id" title="keyword">Equations</span></span> comes with a tactic <span class="inlinecode"><span class="id" title="var">funelim</span></span> that automatically
    does an induction following the pattern matching used to define a
    function, there is no need to do it by hand.
    Moreover, it does so directly with the right induction hypothesis, there
    is no need to generalise the induction hypothesis as done by
    reverting <span class="inlinecode"><span class="id" title="var">n</span></span> in the proof of <span class="inlinecode"><span class="id" title="var">nth_eq</span></span> above.
    To use it, it suffices to write <span class="inlinecode"><span class="id" title="var">funelim</span></span> <span class="inlinecode">(<span class="id" title="var">name_function</span></span> <span class="inlinecode"><span class="id" title="var">a1</span></span> <span class="inlinecode">...</span> <span class="inlinecode"><span class="id" title="var">an</span>)</span>
    where <span class="inlinecode"><span class="id" title="var">a1</span></span> <span class="inlinecode">...</span> <span class="inlinecode"><span class="id" title="var">an</span></span> are the arguments you want to do your induction on.

<div class="paragraph"> </div>

    As an example, let's prove <span class="inlinecode"><span class="id" title="var">app_nil</span></span>, <span class="inlinecode"><span class="id" title="var">app_assoc</span></span>, and <span class="inlinecode"><span class="id" title="var">nth_eq</span></span> for
    which we can already see the advantages over trying to reproduce the
    pattern matching by hand:

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="app_nil" class="idref" href="#app_nil"><span class="id" title="lemma">app_nil</span></a> {<a id="A:134" class="idref" href="#A:134"><span class="id" title="binder">A</span></a>} (<a id="l:135" class="idref" href="#l:135"><span class="id" title="binder">l</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:134"><span class="id" title="variable">A</span></a>) : <a class="idref" href="Tutorial_Equations_basics.html#l:135"><span class="id" title="variable">l</span></a> <a class="idref" href="Tutorial_Equations_basics.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="Tutorial_Equations_basics.html#c8619a1e4f7ee366531acb9abd41b255"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l:135"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">funelim</span> (<a class="idref" href="Tutorial_Equations_basics.html#app"><span class="id" title="definition">app</span></a> <span class="id" title="var">l</span> <a class="idref" href="Tutorial_Equations_basics.html#c8619a1e4f7ee366531acb9abd41b255"><span class="id" title="notation">[]</span></a>). <span class="id" title="var">all</span>: <span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">app</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="app_assoc" class="idref" href="#app_assoc"><span class="id" title="lemma">app_assoc</span></a> {<a id="A:136" class="idref" href="#A:136"><span class="id" title="binder">A</span></a>} (<a id="l1:137" class="idref" href="#l1:137"><span class="id" title="binder">l1</span></a> <a id="l2:138" class="idref" href="#l2:138"><span class="id" title="binder">l2</span></a> <a id="l3:139" class="idref" href="#l3:139"><span class="id" title="binder">l3</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:136"><span class="id" title="variable">A</span></a>) : <a class="idref" href="Tutorial_Equations_basics.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">(</span></a><a class="idref" href="Tutorial_Equations_basics.html#l1:137"><span class="id" title="variable">l1</span></a> <a class="idref" href="Tutorial_Equations_basics.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l2:138"><span class="id" title="variable">l2</span></a><a class="idref" href="Tutorial_Equations_basics.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">)</span></a> <a class="idref" href="Tutorial_Equations_basics.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l3:139"><span class="id" title="variable">l3</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l1:137"><span class="id" title="variable">l1</span></a> <a class="idref" href="Tutorial_Equations_basics.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="Tutorial_Equations_basics.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">(</span></a><a class="idref" href="Tutorial_Equations_basics.html#l2:138"><span class="id" title="variable">l2</span></a> <a class="idref" href="Tutorial_Equations_basics.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l3:139"><span class="id" title="variable">l3</span></a><a class="idref" href="Tutorial_Equations_basics.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">funelim</span> (<a class="idref" href="Tutorial_Equations_basics.html#app"><span class="id" title="definition">app</span></a> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span>). <span class="id" title="var">all</span> : <span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">app</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="nth_eq" class="idref" href="#nth_eq"><span class="id" title="lemma">nth_eq</span></a> {<a id="A:140" class="idref" href="#A:140"><span class="id" title="binder">A</span></a>} (<a id="l:141" class="idref" href="#l:141"><span class="id" title="binder">l</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:140"><span class="id" title="variable">A</span></a>) (<a id="n:142" class="idref" href="#n:142"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="Tutorial_Equations_basics.html#nth_option"><span class="id" title="definition">nth_option</span></a> <a class="idref" href="Tutorial_Equations_basics.html#n:142"><span class="id" title="variable">n</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l:141"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tutorial_Equations_basics.html#nth_option'"><span class="id" title="definition">nth_option'</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l:141"><span class="id" title="variable">l</span></a> <a class="idref" href="Tutorial_Equations_basics.html#n:142"><span class="id" title="variable">n</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">funelim</span> (<a class="idref" href="Tutorial_Equations_basics.html#nth_option"><span class="id" title="definition">nth_option</span></a> <span class="id" title="var">n</span> <span class="id" title="var">l</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">nth_option</span> <span class="id" title="var">nth_option'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
By default, the tactic <span class="inlinecode"><span class="id" title="tactic">autorewrite</span></span> <span class="inlinecode"><span class="id" title="keyword">with</span></span> <span class="inlinecode"><span class="id" title="var">f</span></span> only simplifies a term by the
    equations defining <span class="inlinecode"><span class="id" title="var">f</span></span>, like <span class="inlinecode">[]</span> <span class="inlinecode">++</span> <span class="inlinecode"><span class="id" title="var">l</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">l</span></span> for <span class="inlinecode"><span class="id" title="var">app</span></span>.
    Yet, in practice, it often happens that there are more equations
    that we have proven that we would like to automatically simplify by
    when proving further properties.
    For instance, when reasoning on <span class="inlinecode"><span class="id" title="var">app</span></span>, we may want to further always simplify
    by <span class="inlinecode"><span class="id" title="var">app_nil</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">l</span></span> <span class="inlinecode">+</span> <span class="inlinecode">[]</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">l</span></span> or <span class="inlinecode"><span class="id" title="var">app_assoc</span></span> <span class="inlinecode">:</span> <span class="inlinecode">(<span class="id" title="var">l1</span></span> <span class="inlinecode">++</span> <span class="inlinecode"><span class="id" title="var">l2</span>)</span> <span class="inlinecode">++</span> <span class="inlinecode"><span class="id" title="var">l3</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">l1</span></span> <span class="inlinecode">++</span> <span class="inlinecode">(<span class="id" title="var">l2</span></span> <span class="inlinecode">++</span> <span class="inlinecode"><span class="id" title="var">l3</span>)</span>.
    It is possible to extend <span class="inlinecode"><span class="id" title="tactic">autorewrite</span></span> to make it automatic by adding
    lemma to the database associated to <span class="inlinecode"><span class="id" title="var">f</span></span>.
    This can be done by the syntax:

<div class="paragraph"> </div>

      <span class="inlinecode"></span> <span class="inlinecode">#[<span class="id" title="var">local</span>]</span> <span class="inlinecode"><span class="id" title="keyword">Hint</span></span> <span class="inlinecode"><span class="id" title="keyword">Rewrite</span></span> <span class="inlinecode">@<span class="id" title="var">name_lemma</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">name_function</span>.</span> <span class="inlinecode"></span>

<div class="paragraph"> </div>

    This provides us with a very powerful personnalisable rewrite mechanism.
    However, please note that this mechanism is powerful enough for it
    to become non terminating if one adds the right lemma.

<div class="paragraph"> </div>

    To see how it can be useful, let's define a tail-recursive version of
    list reversal and prove it equal the usual one:

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Equations</span> <a id="rev" class="idref" href="#rev"><span class="id" title="definition">rev</span></a> {<a id="A:143" class="idref" href="#A:143"><span class="id" title="binder">A</span></a>} (<a id="l:144" class="idref" href="#l:144"><span class="id" title="binder">l</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:143"><span class="id" title="variable">A</span></a>) : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="var">A</span> :=<br/>
<a class="idref" href="Tutorial_Equations_basics.html#rev:146"><span class="id" title="definition">rev</span></a> <a class="idref" href="Tutorial_Equations_basics.html#c8619a1e4f7ee366531acb9abd41b255"><span class="id" title="notation">[]</span></a> := <a class="idref" href="Tutorial_Equations_basics.html#c8619a1e4f7ee366531acb9abd41b255"><span class="id" title="notation">[]</span></a>;<br/>
<a class="idref" href="Tutorial_Equations_basics.html#rev:149"><span class="id" title="definition">rev</span></a> (<a class="idref" href="Tutorial_Equations_basics.html#a:147"><span class="id" title="variable">a</span></a><a class="idref" href="Tutorial_Equations_basics.html#:::x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="Tutorial_Equations_basics.html#l:148"><span class="id" title="variable">l</span></a>) := <a class="idref" href="Tutorial_Equations_basics.html#rev:145"><span class="id" title="definition">rev</span></a> <span class="id" title="var">l</span> <a class="idref" href="Tutorial_Equations_basics.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="Tutorial_Equations_basics.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">[</span></a><span class="id" title="var">a</span><a class="idref" href="Tutorial_Equations_basics.html#1e2518ff2e78f907c94429897ac7861a"><span class="id" title="notation">]</span></a>.<br/>

<br/>
<span class="id" title="keyword">Equations</span> <a id="rev_acc" class="idref" href="#rev_acc"><span class="id" title="definition">rev_acc</span></a> {<a id="A:150" class="idref" href="#A:150"><span class="id" title="binder">A</span></a>} (<a id="l:151" class="idref" href="#l:151"><span class="id" title="binder">l</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:150"><span class="id" title="variable">A</span></a>) (<a id="acc:152" class="idref" href="#acc:152"><span class="id" title="binder">acc</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:150"><span class="id" title="variable">A</span></a>) : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="var">A</span> :=<br/>
<a class="idref" href="Tutorial_Equations_basics.html#rev_acc:155"><span class="id" title="definition">rev_acc</span></a> <a class="idref" href="Tutorial_Equations_basics.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="Tutorial_Equations_basics.html#acc:154"><span class="id" title="variable">acc</span></a> := <span class="id" title="var">acc</span>;<br/>
<a class="idref" href="Tutorial_Equations_basics.html#rev_acc:159"><span class="id" title="definition">rev_acc</span></a> (<a class="idref" href="Tutorial_Equations_basics.html#cons"><span class="id" title="constructor">cons</span></a> <a class="idref" href="Tutorial_Equations_basics.html#a:156"><span class="id" title="variable">a</span></a> <a class="idref" href="Tutorial_Equations_basics.html#v:158"><span class="id" title="variable">v</span></a>) <a class="idref" href="Tutorial_Equations_basics.html#acc:157"><span class="id" title="variable">acc</span></a> := <a class="idref" href="Tutorial_Equations_basics.html#rev_acc:153"><span class="id" title="definition">rev_acc</span></a> <span class="id" title="var">v</span> (<span class="id" title="var">a</span> <a class="idref" href="Tutorial_Equations_basics.html#:::x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">acc</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="rev_rev_acc" class="idref" href="#rev_rev_acc"><span class="id" title="lemma">rev_rev_acc</span></a> {<a id="A:160" class="idref" href="#A:160"><span class="id" title="binder">A</span></a>} (<a id="l:161" class="idref" href="#l:161"><span class="id" title="binder">l</span></a> <a id="l':162" class="idref" href="#l':162"><span class="id" title="binder">l'</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:160"><span class="id" title="variable">A</span></a>) : <a class="idref" href="Tutorial_Equations_basics.html#rev_acc"><span class="id" title="definition">rev_acc</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l:161"><span class="id" title="variable">l</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l':162"><span class="id" title="variable">l'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tutorial_Equations_basics.html#rev"><span class="id" title="definition">rev</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l:161"><span class="id" title="variable">l</span></a> <a class="idref" href="Tutorial_Equations_basics.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l':162"><span class="id" title="variable">l'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">funelim</span> (<a class="idref" href="Tutorial_Equations_basics.html#rev"><span class="id" title="definition">rev</span></a> <span class="id" title="var">l</span>). <span class="id" title="var">all</span>: <span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">rev</span> <span class="id" title="var">rev_acc</span> <span class="id" title="var">app</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tutorial_Equations_basics.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Rewrite</span> @<a class="idref" href="Tutorial_Equations_basics.html#app_nil"><span class="id" title="lemma">app_nil</span></a> @<a class="idref" href="Tutorial_Equations_basics.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> : <span class="id" title="var">app</span>.<br/>

<br/>
<span class="id" title="keyword">Goal</span> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">∀</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">{</span></a><a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="binder, definition"><span id="A:163" class="id">A</span></span></a><a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">}</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">(</span></a><a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="binder, definition"><span id="l1:164" class="id">l1</span></span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="binder, definition"><span id="l2:165" class="id">l2</span></span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="binder, definition"><span id="l3:166" class="id">l3</span></span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="binder, definition"><span id="l4:167" class="id">l4</span></span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">:</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">list</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">A</span></a><a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">((</span></a><a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">l1</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">++</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">l2</span></a><a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">)</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">++</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">l3</span></a><a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">)</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">++</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">l4</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">=</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">l1</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">++</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">(</span></a><a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">l2</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">++</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">(</span></a><a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">l3</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">++</span></a> <a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">l4</span></a><a id="Unnamed_thm" class="idref" href="#Unnamed_thm"><span class="id" title="definition">))</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">app</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="rev_eq" class="idref" href="#rev_eq"><span class="id" title="lemma">rev_eq</span></a> {<a id="A:168" class="idref" href="#A:168"><span class="id" title="binder">A</span></a>} (<a id="l:169" class="idref" href="#l:169"><span class="id" title="binder">l</span></a> <a id="l':170" class="idref" href="#l':170"><span class="id" title="binder">l'</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:168"><span class="id" title="variable">A</span></a>) : <a class="idref" href="Tutorial_Equations_basics.html#rev_acc"><span class="id" title="definition">rev_acc</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l:169"><span class="id" title="variable">l</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l':170"><span class="id" title="variable">l'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tutorial_Equations_basics.html#rev"><span class="id" title="definition">rev</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l:169"><span class="id" title="variable">l</span></a> <a class="idref" href="Tutorial_Equations_basics.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l':170"><span class="id" title="variable">l'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">funelim</span> (<a class="idref" href="Tutorial_Equations_basics.html#rev"><span class="id" title="definition">rev</span></a> <span class="id" title="var">l</span>). <span class="id" title="var">all</span>: <span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">rev</span> <span class="id" title="var">rev_acc</span> <span class="id" title="var">app</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
In practice, it also often happens that after simplification we get a
    lot of uninteresting cases when proving properties by induction,
    properties that we would like to deal with automatically in a controlled way.
    To help us, <span class="inlinecode"><span class="id" title="keyword">Equations</span></span> provides us with a tactic <span class="inlinecode"><span class="id" title="var">simp</span></span> <span class="inlinecode"><span class="id" title="var">f1</span></span> <span class="inlinecode">...</span> <span class="inlinecode"><span class="id" title="var">fn</span></span>
    that first simplify the goal by <span class="inlinecode"><span class="id" title="tactic">autorewrite</span></span> <span class="inlinecode"><span class="id" title="keyword">with</span></span> <span class="inlinecode"><span class="id" title="var">f1</span></span> <span class="inlinecode">...</span> <span class="inlinecode"><span class="id" title="var">fn</span></span> then
    tries to solve the goal by a proof search by a particular instance of
    <span class="inlinecode"><span class="id" title="tactic">try</span></span> <span class="inlinecode"><span class="id" title="var">typeclasses</span></span> <span class="inlinecode"><span class="id" title="tactic">eauto</span></span>.
    It does so using the equations associated to <span class="inlinecode"><span class="id" title="var">f1</span></span> <span class="inlinecode">...</span> <span class="inlinecode"><span class="id" title="var">fn</span></span>, and a few more
    lemmas specific to <span class="inlinecode"><span class="id" title="keyword">Equations</span></span> meant to ease the proof search.
    Though, please note that this proof search does not run <span class="inlinecode"><span class="id" title="tactic">reflexivity</span></span>.

<div class="paragraph"> </div>

    Linking <span class="inlinecode"><span class="id" title="tactic">simpl</span></span> with <span class="inlinecode"><span class="id" title="var">funelim</span></span> like <span class="inlinecode"><span class="id" title="var">funelim</span></span> <span class="inlinecode"><span class="id" title="var">sth</span></span> <span class="inlinecode">;</span> <span class="inlinecode"><span class="id" title="var">simp</span></span> <span class="inlinecode"><span class="id" title="var">f1</span></span> <span class="inlinecode">...</span> <span class="inlinecode"><span class="id" title="var">fn</span></span> then
    enables us to simplify all the goals and at the same to automatically
    prove uninteresting ones.
    As examples, let's prove again <span class="inlinecode"><span class="id" title="var">nth_eq</span></span> and <span class="inlinecode"><span class="id" title="var">rev_rev_acc</span></span>:

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="nth_eq" class="idref" href="#nth_eq"><span class="id" title="definition">nth_eq</span></a> {<a id="A:171" class="idref" href="#A:171"><span class="id" title="binder">A</span></a>} (<a id="l:172" class="idref" href="#l:172"><span class="id" title="binder">l</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:171"><span class="id" title="variable">A</span></a>) (<a id="n:173" class="idref" href="#n:173"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="Tutorial_Equations_basics.html#nth_option"><span class="id" title="definition">nth_option</span></a> <a class="idref" href="Tutorial_Equations_basics.html#n:173"><span class="id" title="variable">n</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l:172"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tutorial_Equations_basics.html#nth_option'"><span class="id" title="definition">nth_option'</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l:172"><span class="id" title="variable">l</span></a> <a class="idref" href="Tutorial_Equations_basics.html#n:173"><span class="id" title="variable">n</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">funelim</span> (<a class="idref" href="Tutorial_Equations_basics.html#nth_option"><span class="id" title="definition">nth_option</span></a> <span class="id" title="var">n</span> <span class="id" title="var">l</span>). <span class="id" title="var">all</span>: <span class="id" title="var">simp</span> <span class="id" title="var">nth_option</span> <span class="id" title="var">nth_option'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span> : <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="rev_eq" class="idref" href="#rev_eq"><span class="id" title="lemma">rev_eq</span></a> {<a id="A:174" class="idref" href="#A:174"><span class="id" title="binder">A</span></a>} (<a id="l:175" class="idref" href="#l:175"><span class="id" title="binder">l</span></a> <a id="l':176" class="idref" href="#l':176"><span class="id" title="binder">l'</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:174"><span class="id" title="variable">A</span></a>) : <a class="idref" href="Tutorial_Equations_basics.html#rev_acc"><span class="id" title="definition">rev_acc</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l:175"><span class="id" title="variable">l</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l':176"><span class="id" title="variable">l'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tutorial_Equations_basics.html#rev"><span class="id" title="definition">rev</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l:175"><span class="id" title="variable">l</span></a> <a class="idref" href="Tutorial_Equations_basics.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l':176"><span class="id" title="variable">l'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">funelim</span> (<a class="idref" href="Tutorial_Equations_basics.html#rev"><span class="id" title="definition">rev</span></a> <span class="id" title="var">l</span>). <span class="id" title="var">all</span>: <span class="id" title="var">simp</span> <span class="id" title="var">rev</span> <span class="id" title="var">rev_acc</span> <span class="id" title="var">app</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
As exercices, you can try to prove the following properties  
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="app_length" class="idref" href="#app_length"><span class="id" title="lemma">app_length</span></a> {<a id="A:177" class="idref" href="#A:177"><span class="id" title="binder">A</span></a>} (<a id="l:178" class="idref" href="#l:178"><span class="id" title="binder">l</span></a> <a id="l':179" class="idref" href="#l':179"><span class="id" title="binder">l'</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:177"><span class="id" title="variable">A</span></a>) : <a class="idref" href="Tutorial_Equations_basics.html#length"><span class="id" title="definition">length</span></a> (<a class="idref" href="Tutorial_Equations_basics.html#l:178"><span class="id" title="variable">l</span></a> <a class="idref" href="Tutorial_Equations_basics.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l':179"><span class="id" title="variable">l'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tutorial_Equations_basics.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l:178"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Tutorial_Equations_basics.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l':179"><span class="id" title="variable">l'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="nth_overflow" class="idref" href="#nth_overflow"><span class="id" title="lemma">nth_overflow</span></a> {<a id="A:180" class="idref" href="#A:180"><span class="id" title="binder">A</span></a>} (<a id="n:181" class="idref" href="#n:181"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="l:182" class="idref" href="#l:182"><span class="id" title="binder">l</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:180"><span class="id" title="variable">A</span></a>) : <a class="idref" href="Tutorial_Equations_basics.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l:182"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="Tutorial_Equations_basics.html#n:181"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tutorial_Equations_basics.html#nth_option"><span class="id" title="definition">nth_option</span></a> <a class="idref" href="Tutorial_Equations_basics.html#n:181"><span class="id" title="variable">n</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l:182"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="app_nth1" class="idref" href="#app_nth1"><span class="id" title="lemma">app_nth1</span></a> {<a id="A:183" class="idref" href="#A:183"><span class="id" title="binder">A</span></a>} (<a id="n:184" class="idref" href="#n:184"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="l:185" class="idref" href="#l:185"><span class="id" title="binder">l</span></a> <a id="l':186" class="idref" href="#l':186"><span class="id" title="binder">l'</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:183"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tutorial_Equations_basics.html#n:184"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="Tutorial_Equations_basics.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l:185"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tutorial_Equations_basics.html#nth_option"><span class="id" title="definition">nth_option</span></a> <a class="idref" href="Tutorial_Equations_basics.html#n:184"><span class="id" title="variable">n</span></a> (<a class="idref" href="Tutorial_Equations_basics.html#l:185"><span class="id" title="variable">l</span></a><a class="idref" href="Tutorial_Equations_basics.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a><a class="idref" href="Tutorial_Equations_basics.html#l':186"><span class="id" title="variable">l'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tutorial_Equations_basics.html#nth_option"><span class="id" title="definition">nth_option</span></a> <a class="idref" href="Tutorial_Equations_basics.html#n:184"><span class="id" title="variable">n</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l:185"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="app_nth2" class="idref" href="#app_nth2"><span class="id" title="lemma">app_nth2</span></a> {<a id="A:187" class="idref" href="#A:187"><span class="id" title="binder">A</span></a>} (<a id="n:188" class="idref" href="#n:188"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="l:189" class="idref" href="#l:189"><span class="id" title="binder">l</span></a> <a id="l':190" class="idref" href="#l':190"><span class="id" title="binder">l'</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:187"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tutorial_Equations_basics.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l:189"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="Tutorial_Equations_basics.html#n:188"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tutorial_Equations_basics.html#nth_option"><span class="id" title="definition">nth_option</span></a> <a class="idref" href="Tutorial_Equations_basics.html#n:188"><span class="id" title="variable">n</span></a> (<a class="idref" href="Tutorial_Equations_basics.html#l:189"><span class="id" title="variable">l</span></a><a class="idref" href="Tutorial_Equations_basics.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a><a class="idref" href="Tutorial_Equations_basics.html#l':190"><span class="id" title="variable">l'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tutorial_Equations_basics.html#nth_option"><span class="id" title="definition">nth_option</span></a> (<a class="idref" href="Tutorial_Equations_basics.html#n:188"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a><a class="idref" href="Tutorial_Equations_basics.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l:189"><span class="id" title="variable">l</span></a>) <a class="idref" href="Tutorial_Equations_basics.html#l':190"><span class="id" title="variable">l'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="distr_rev" class="idref" href="#distr_rev"><span class="id" title="lemma">distr_rev</span></a> {<a id="A:191" class="idref" href="#A:191"><span class="id" title="binder">A</span></a>} (<a id="l:192" class="idref" href="#l:192"><span class="id" title="binder">l</span></a> <a id="l':193" class="idref" href="#l':193"><span class="id" title="binder">l'</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:191"><span class="id" title="variable">A</span></a>) : <a class="idref" href="Tutorial_Equations_basics.html#rev"><span class="id" title="definition">rev</span></a> (<a class="idref" href="Tutorial_Equations_basics.html#l:192"><span class="id" title="variable">l</span></a> <a class="idref" href="Tutorial_Equations_basics.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l':193"><span class="id" title="variable">l'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tutorial_Equations_basics.html#rev"><span class="id" title="definition">rev</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l':193"><span class="id" title="variable">l'</span></a> <a class="idref" href="Tutorial_Equations_basics.html#f03f7a04ef75ff3ac66ca5c23554e52e"><span class="id" title="notation">++</span></a> <a class="idref" href="Tutorial_Equations_basics.html#rev"><span class="id" title="definition">rev</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l:192"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab8"></a><h1 class="section">2. With clauses</h1>


<div class="paragraph"> </div>

    The structure of real programs is generally richer than a simple case tree on the
    original arguments.
    In the course of a computation, we might want to compute or scrutinize
    intermediate results (e.g. coming from function calls) to produce an answer.
    In terms of dependent pattern matching, this literally means adding a new
    pattern to the left of our equations made available for further refinement.
    This concept is know as <span class="inlinecode"><span class="id" title="keyword">with</span></span> clauses in the Agda community and was first
    introduced in the Epigram language.

<div class="paragraph"> </div>

    <span class="inlinecode"><span class="id" title="var">With</span></span> clause are available in <span class="inlinecode"><span class="id" title="keyword">Equations</span></span> with the following syntax
    where <span class="inlinecode"><span class="id" title="var">b</span></span> is the term we wish to inspect, and <span class="inlinecode"><span class="id" title="var">p1</span></span> <span class="inlinecode">...</span> <span class="inlinecode"><span class="id" title="var">pk</span></span> the patterns we
    match <span class="inlinecode"><span class="id" title="var">b</span></span> to:

<div class="paragraph"> </div>

    <br/>
<span class="inlinecode">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">f</span> (<span class="id" title="var">cxt</span> <span class="id" title="var">x1</span> ... <span class="id" title="var">xn</span>) <span class="id" title="keyword">with</span> <span class="id" title="var">b</span> ⇒ {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">cxt</span> <span class="id" title="var">x1</span> ... <span class="id" title="var">xn</span>) <span class="id" title="var">p1</span> := ... ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">cxt</span> <span class="id" title="var">x1</span> ... <span class="id" title="var">xn</span>) <span class="id" title="var">pk</span> := ...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}
<div class="paragraph"> </div>

</span>
<div class="paragraph"> </div>

    As a first example, we can a define a function filtering a list by a
    predicate <span class="inlinecode"><span class="id" title="var">p</span></span>.
    In the case <span class="inlinecode"><span class="id" title="var">cons</span></span> <span class="inlinecode"><span class="id" title="var">a</span></span> <span class="inlinecode"><span class="id" title="var">l</span></span>, the <span class="inlinecode"><span class="id" title="keyword">with</span></span> clause enables us to compute
    the intermediate value <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode"><span class="id" title="var">a</span></span> and to check whether it is <span class="inlinecode"><span class="id" title="var">true</span></span> or <span class="inlinecode"><span class="id" title="var">false</span></span>,
    and hence if <span class="inlinecode"><span class="id" title="var">a</span></span> verify the predicate <span class="inlinecode"><span class="id" title="var">p</span></span> and should be kept or not:

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Equations</span> <a id="filter" class="idref" href="#filter"><span class="id" title="definition">filter</span></a> {<a id="A:194" class="idref" href="#A:194"><span class="id" title="binder">A</span></a>} (<a id="l:195" class="idref" href="#l:195"><span class="id" title="binder">l</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:194"><span class="id" title="variable">A</span></a>) (<a id="p:196" class="idref" href="#p:196"><span class="id" title="binder">p</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#A:194"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="var">A</span> :=<br/>
<a class="idref" href="Tutorial_Equations_basics.html#filter:199"><span class="id" title="definition">filter</span></a> <a class="idref" href="Tutorial_Equations_basics.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="Tutorial_Equations_basics.html#p:198"><span class="id" title="variable">p</span></a> := <a class="idref" href="Tutorial_Equations_basics.html#nil"><span class="id" title="constructor">nil</span></a> ;<br/>
<a class="idref" href="Tutorial_Equations_basics.html#filter:203"><span class="id" title="definition">filter</span></a> (<a class="idref" href="Tutorial_Equations_basics.html#cons"><span class="id" title="constructor">cons</span></a> <a class="idref" href="Tutorial_Equations_basics.html#a:200"><span class="id" title="variable">a</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l:201"><span class="id" title="variable">l</span></a>) <a class="idref" href="Tutorial_Equations_basics.html#p:202"><span class="id" title="variable">p</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">p</span> <span class="id" title="var">a</span> ⇒ {<br/>
&nbsp;&nbsp;<a class="idref" href="Tutorial_Equations_basics.html#filter:207"><span class="id" title="definition">filter</span></a> (<a class="idref" href="Tutorial_Equations_basics.html#cons"><span class="id" title="constructor">cons</span></a> <a class="idref" href="Tutorial_Equations_basics.html#a:204"><span class="id" title="variable">a</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l:205"><span class="id" title="variable">l</span></a>) <a class="idref" href="Tutorial_Equations_basics.html#p:206"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> := <span class="id" title="var">a</span> <a class="idref" href="Tutorial_Equations_basics.html#:::x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="Tutorial_Equations_basics.html#filter:197"><span class="id" title="definition">filter</span></a> <span class="id" title="var">l</span> <span class="id" title="var">p</span> ;<br/>
&nbsp;&nbsp;<a class="idref" href="Tutorial_Equations_basics.html#filter:211"><span class="id" title="definition">filter</span></a> (<a class="idref" href="Tutorial_Equations_basics.html#cons"><span class="id" title="constructor">cons</span></a> <a class="idref" href="Tutorial_Equations_basics.html#a:208"><span class="id" title="variable">a</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l:209"><span class="id" title="variable">l</span></a>) <a class="idref" href="Tutorial_Equations_basics.html#p:210"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> := <a class="idref" href="Tutorial_Equations_basics.html#filter:197"><span class="id" title="definition">filter</span></a> <span class="id" title="var">l</span> <span class="id" title="var">p</span> }.<br/>

<br/>
</div>

<div class="doc">
This syntax is a bit heavy. To avoid repeating the full clause
    <span class="inlinecode"><span class="id" title="var">filter</span></span> <span class="inlinecode">(<span class="id" title="var">cons</span></span> <span class="inlinecode"><span class="id" title="var">a</span></span> <span class="inlinecode"><span class="id" title="var">l</span>)</span> <span class="inlinecode"><span class="id" title="var">p</span></span> and to focus on the <span class="inlinecode"><span class="id" title="keyword">with</span></span> pattern, we can use the
    <span class="inlinecode"><span class="id" title="keyword">Fixpoint</span></span> like syntax in the with clause discussed in section 1.1.
    This enables to rewrite the <span class="inlinecode"><span class="id" title="keyword">with</span></span> clause of the function <span class="inlinecode"><span class="id" title="var">filter</span></span>
    much more concisely:

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Equations</span> <a id="filter'" class="idref" href="#filter'"><span class="id" title="definition">filter'</span></a> {<a id="A:212" class="idref" href="#A:212"><span class="id" title="binder">A</span></a>} (<a id="l:213" class="idref" href="#l:213"><span class="id" title="binder">l</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:212"><span class="id" title="variable">A</span></a>) (<a id="p:214" class="idref" href="#p:214"><span class="id" title="binder">p</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#A:212"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="var">A</span> :=<br/>
<a class="idref" href="Tutorial_Equations_basics.html#filter':217"><span class="id" title="definition">filter'</span></a> <a class="idref" href="Tutorial_Equations_basics.html#c8619a1e4f7ee366531acb9abd41b255"><span class="id" title="notation">[]</span></a> <a class="idref" href="Tutorial_Equations_basics.html#p:216"><span class="id" title="variable">p</span></a> ⇒ <a class="idref" href="Tutorial_Equations_basics.html#c8619a1e4f7ee366531acb9abd41b255"><span class="id" title="notation">[]</span></a>;<br/>
<a class="idref" href="Tutorial_Equations_basics.html#filter':221"><span class="id" title="definition">filter'</span></a> (<a class="idref" href="Tutorial_Equations_basics.html#a:218"><span class="id" title="variable">a</span></a> <a class="idref" href="Tutorial_Equations_basics.html#:::x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l:219"><span class="id" title="variable">l</span></a>) <a class="idref" href="Tutorial_Equations_basics.html#p:220"><span class="id" title="variable">p</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">p</span> <span class="id" title="var">a</span> ⇒ {<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>  ⇒ <span class="id" title="var">a</span> <a class="idref" href="Tutorial_Equations_basics.html#:::x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="Tutorial_Equations_basics.html#filter':215"><span class="id" title="definition">filter'</span></a> <span class="id" title="var">l</span> <span class="id" title="var">p</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> ⇒ <a class="idref" href="Tutorial_Equations_basics.html#filter':215"><span class="id" title="definition">filter'</span></a> <span class="id" title="var">l</span> <span class="id" title="var">p</span> }.<br/>

<br/>
</div>

<div class="doc">
To show that <span class="inlinecode"><span class="id" title="var">filter</span></span> is well-behaved, we can define a predicate <span class="inlinecode"><span class="id" title="var">In</span></span> and
    check that if an element is in the list and verifies the predicate,
    then it is in the filtered list.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Equations</span> <a id="In" class="idref" href="#In"><span class="id" title="definition">In</span></a> {<a id="A:228" class="idref" href="#A:228"><span class="id" title="binder">A</span></a>} (<a id="x:229" class="idref" href="#x:229"><span class="id" title="binder">x</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#A:228"><span class="id" title="variable">A</span></a>) (<a id="l:230" class="idref" href="#l:230"><span class="id" title="binder">l</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:228"><span class="id" title="variable">A</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
<a class="idref" href="Tutorial_Equations_basics.html#In:233"><span class="id" title="definition">In</span></a> <a class="idref" href="Tutorial_Equations_basics.html#x:232"><span class="id" title="variable">x</span></a> <a class="idref" href="Tutorial_Equations_basics.html#c8619a1e4f7ee366531acb9abd41b255"><span class="id" title="notation">[]</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a> ;<br/>
<a class="idref" href="Tutorial_Equations_basics.html#In:237"><span class="id" title="definition">In</span></a> <a class="idref" href="Tutorial_Equations_basics.html#x:236"><span class="id" title="variable">x</span></a> (<a class="idref" href="Tutorial_Equations_basics.html#a:234"><span class="id" title="variable">a</span></a><a class="idref" href="Tutorial_Equations_basics.html#:::x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="Tutorial_Equations_basics.html#l:235"><span class="id" title="variable">l</span></a>) ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="Tutorial_Equations_basics.html#In:231"><span class="id" title="definition">In</span></a> <span class="id" title="var">x</span> <span class="id" title="var">l</span>.<br/>

<br/>
</div>

<div class="doc">
For function defined using <span class="inlinecode"><span class="id" title="keyword">with</span></span> clauses, <span class="inlinecode"><span class="id" title="var">funelim</span></span> does the usual
    disjunction of cases for us, and additionally destructs the pattern
    associated to the |with] clause and remembers it.
    In the case of <span class="inlinecode"><span class="id" title="var">filter</span></span>, it means additionally destructing <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode"><span class="id" title="var">a</span></span> and
    remembering whether <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode"><span class="id" title="var">a</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">true</span></span> or <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode"><span class="id" title="var">a</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">false</span></span>.

<div class="paragraph"> </div>

    For regular patterns, simplifying <span class="inlinecode"><span class="id" title="var">filter</span></span> behaves as usual.
    For the <span class="inlinecode"><span class="id" title="keyword">with</span></span> clause, simplifying <span class="inlinecode"><span class="id" title="var">filter</span></span> makes a subclause
    corresponding to the current case appear.
    For <span class="inlinecode"><span class="id" title="var">filter</span></span>, it makes appear <span class="inlinecode"><span class="id" title="var">filter_clause_1</span></span> in the case <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode"><span class="id" title="var">a</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">true</span></span>,
    and <span class="inlinecode"><span class="id" title="var">filter_clause_2</span></span> in the case <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode"><span class="id" title="var">a</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">false</span></span>.
    This is due to <span class="inlinecode"><span class="id" title="keyword">Equations</span></span> internal mechanics.
    To simplify the goal further, it suffices to rewrite <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode"><span class="id" title="var">a</span></span> by its value
    in the branch, and to simplify <span class="inlinecode"><span class="id" title="var">filter</span></span> again.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="filter_In" class="idref" href="#filter_In"><span class="id" title="lemma">filter_In</span></a> {<a id="A:238" class="idref" href="#A:238"><span class="id" title="binder">A</span></a>} (<a id="x:239" class="idref" href="#x:239"><span class="id" title="binder">x</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#A:238"><span class="id" title="variable">A</span></a>) (<a id="l:240" class="idref" href="#l:240"><span class="id" title="binder">l</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:238"><span class="id" title="variable">A</span></a>) (<a id="p:241" class="idref" href="#p:241"><span class="id" title="binder">p</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#A:238"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tutorial_Equations_basics.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Tutorial_Equations_basics.html#x:239"><span class="id" title="variable">x</span></a> (<a class="idref" href="Tutorial_Equations_basics.html#filter"><span class="id" title="definition">filter</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l:240"><span class="id" title="variable">l</span></a> <a class="idref" href="Tutorial_Equations_basics.html#p:241"><span class="id" title="variable">p</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="Tutorial_Equations_basics.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Tutorial_Equations_basics.html#x:239"><span class="id" title="variable">x</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l:240"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="Tutorial_Equations_basics.html#p:241"><span class="id" title="variable">p</span></a> <a class="idref" href="Tutorial_Equations_basics.html#x:239"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">funelim</span> (<a class="idref" href="Tutorial_Equations_basics.html#filter"><span class="id" title="definition">filter</span></a> <span class="id" title="var">l</span> <span class="id" title="var">p</span>); <span class="id" title="var">simp</span> <span class="id" title="var">filter</span> <span class="id" title="var">In</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>; <span class="id" title="var">simp</span> <span class="id" title="var">filter</span> <span class="id" title="var">In</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>; <span class="id" title="var">simp</span> <span class="id" title="var">filter</span> <span class="id" title="var">In</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">With</span></span> clauses can also be useful to inspect a recursive call.
    For instance, <span class="inlinecode"><span class="id" title="keyword">with</span></span> clause enables us to write a particularly concise
    definition of the <span class="inlinecode"><span class="id" title="var">unzip</span></span> function:

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Equations</span> <a id="unzip" class="idref" href="#unzip"><span class="id" title="definition">unzip</span></a> {<a id="A:242" class="idref" href="#A:242"><span class="id" title="binder">A</span></a> <a id="B:243" class="idref" href="#B:243"><span class="id" title="binder">B</span></a>} (<a id="l:244" class="idref" href="#l:244"><span class="id" title="binder">l</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="Tutorial_Equations_basics.html#A:242"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="Tutorial_Equations_basics.html#B:243"><span class="id" title="variable">B</span></a>)) : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="var">B</span> :=<br/>
<a class="idref" href="Tutorial_Equations_basics.html#unzip:246"><span class="id" title="definition">unzip</span></a> <a class="idref" href="Tutorial_Equations_basics.html#c8619a1e4f7ee366531acb9abd41b255"><span class="id" title="notation">[]</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tutorial_Equations_basics.html#c8619a1e4f7ee366531acb9abd41b255"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="Tutorial_Equations_basics.html#c8619a1e4f7ee366531acb9abd41b255"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>;<br/>
<a class="idref" href="Tutorial_Equations_basics.html#unzip:250"><span class="id" title="definition">unzip</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tutorial_Equations_basics.html#a:247"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="Tutorial_Equations_basics.html#b:248"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="Tutorial_Equations_basics.html#:::x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="Tutorial_Equations_basics.html#l:249"><span class="id" title="variable">l</span></a>) <span class="id" title="keyword">with</span> <a class="idref" href="Tutorial_Equations_basics.html#unzip:245"><span class="id" title="definition">unzip</span></a> <span class="id" title="var">l</span> ⇒ {<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tutorial_Equations_basics.html#la:254"><span class="id" title="variable">la</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="Tutorial_Equations_basics.html#lb:255"><span class="id" title="variable">lb</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a</span><a class="idref" href="Tutorial_Equations_basics.html#:::x_'::'_x"><span class="id" title="notation">::</span></a><span class="id" title="var">la</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">b</span><a class="idref" href="Tutorial_Equations_basics.html#:::x_'::'_x"><span class="id" title="notation">::</span></a><span class="id" title="var">lb</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
}.<br/>

<br/>
</div>

<div class="doc">
They can also be useful to discard impossible branches.
    For instance, rather than returning an option type, we can define a
    <span class="inlinecode"><span class="id" title="var">head</span></span> function by requiring for the input to be different than the
    empty list.
    In the <span class="inlinecode"><span class="id" title="var">nil</span></span> case, we can then destruct <span class="inlinecode"><span class="id" title="var">pf</span></span> <span class="inlinecode"><span class="id" title="var">eq_refl</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">False</span></span> which
    as no constructors to define our function.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Equations</span> <a id="head" class="idref" href="#head"><span class="id" title="definition">head</span></a> {<a id="A:257" class="idref" href="#A:257"><span class="id" title="binder">A</span></a>} (<a id="l:258" class="idref" href="#l:258"><span class="id" title="binder">l</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:257"><span class="id" title="variable">A</span></a>) (<a id="pf:259" class="idref" href="#pf:259"><span class="id" title="binder">pf</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#l:258"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="Tutorial_Equations_basics.html#nil"><span class="id" title="constructor">nil</span></a>) : <span class="id" title="var">A</span> :=<br/>
<a class="idref" href="Tutorial_Equations_basics.html#head:262"><span class="id" title="definition">head</span></a> <a class="idref" href="Tutorial_Equations_basics.html#c8619a1e4f7ee366531acb9abd41b255"><span class="id" title="notation">[]</span></a> <a class="idref" href="Tutorial_Equations_basics.html#pf:261"><span class="id" title="variable">pf</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">pf</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>) := { };<br/>
<a class="idref" href="Tutorial_Equations_basics.html#head:265"><span class="id" title="definition">head</span></a> (<a class="idref" href="Tutorial_Equations_basics.html#a:263"><span class="id" title="variable">a</span></a><a class="idref" href="Tutorial_Equations_basics.html#:::x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="Tutorial_Equations_basics.html#l:264"><span class="id" title="variable">l</span></a>) <span class="id" title="var">_</span> := <span class="id" title="var">a</span>.<br/>

<br/>
</div>

<div class="doc">
As exercices, you can try to:
<ul class="doclist">
<li> Prove that both head functions are equal up to <span class="inlinecode"><span class="id" title="var">Some</span></span>

</li>
<li> Prove that a filtered list has a smaller length than the original one

</li>
<li> Define a function <span class="inlinecode"><span class="id" title="var">find_dictionary</span></span> that given a key and an
      equality test, returns the first element associated to the key and
      <span class="inlinecode"><span class="id" title="var">None</span></span> otherwise

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="head_head" class="idref" href="#head_head"><span class="id" title="definition">head_head</span></a> {<a id="A:266" class="idref" href="#A:266"><span class="id" title="binder">A</span></a>} (<a id="l:267" class="idref" href="#l:267"><span class="id" title="binder">l</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:266"><span class="id" title="variable">A</span></a>) (<a id="pf:268" class="idref" href="#pf:268"><span class="id" title="binder">pf</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#l:267"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="Tutorial_Equations_basics.html#nil"><span class="id" title="constructor">nil</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="Tutorial_Equations_basics.html#head"><span class="id" title="definition">head</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l:267"><span class="id" title="variable">l</span></a> <a class="idref" href="Tutorial_Equations_basics.html#pf:268"><span class="id" title="variable">pf</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tutorial_Equations_basics.html#head_option"><span class="id" title="definition">head_option</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l:267"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="filter_length" class="idref" href="#filter_length"><span class="id" title="definition">filter_length</span></a> {<a id="A:269" class="idref" href="#A:269"><span class="id" title="binder">A</span></a>} (<a id="l:270" class="idref" href="#l:270"><span class="id" title="binder">l</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tutorial_Equations_basics.html#A:269"><span class="id" title="variable">A</span></a>) (<a id="p:271" class="idref" href="#p:271"><span class="id" title="binder">p</span></a> : <a class="idref" href="Tutorial_Equations_basics.html#A:269"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tutorial_Equations_basics.html#length"><span class="id" title="definition">length</span></a> (<a class="idref" href="Tutorial_Equations_basics.html#filter"><span class="id" title="definition">filter</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l:270"><span class="id" title="variable">l</span></a> <a class="idref" href="Tutorial_Equations_basics.html#p:271"><span class="id" title="variable">p</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="Tutorial_Equations_basics.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="Tutorial_Equations_basics.html#l:270"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>
</div>

</div>
</div>
<script src="./download-session.js"></script>
</body>
</html>
